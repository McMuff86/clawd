# 2026-02-03 â€“ Session Log

## UI Freeze Deep Dive

**Root Cause identifiziert:** `toSanitizedMarkdownHtml()` in `grouped-render.ts` wird bei jedem Streaming-Token auf den KOMPLETTEN Text aufgerufen. Cache ist nutzlos weil sich der String bei jedem Token Ã¤ndert.

**Konkret:** 
- File: `ui/src/ui/chat/grouped-render.ts`
- Problem: WÃ¤hrend Streaming â†’ jeder Token triggert Re-Parse des ganzen Markdown
- Performance-Profil: 8.68s in `Run microtasks`, 99% Layout/Reflow

**Workaround:** Sessions regelmÃ¤ssig cleanen
- Script: `~/clawd/scripts/cleanup-sessions.sh`
- Cron: Sonntags 03:00 (ID: `d7790144-3b63-4d19-80e6-7a7ba4baf6cc`)
- Archiv: `~/clawd/archives/sessions/`

**Bug Report:** `~/clawd/openclaw-ui-bug-report.md` (noch nicht submitted)

---

## Whisper Voice Transcription

**Setup komplett:**
- Binary: `~/.local/bin/whisper-cpp`
- Script: `~/.local/bin/whisper-transcribe`
- Model: `~/.local/share/whisper-cpp/ggml-base.bin` (141MB)

**Model-Entscheidung:** `base` statt `tiny`
- ~16s Transcription Zeit
- Gute QualitÃ¤t ("Das ist der Test 2." korrekt erkannt)
- `small` (465MB) auch runtergeladen fÃ¼r spÃ¤ter

**Limitation:** Kein CUDA in WSL2 â†’ CPU only

---

## Qwen3-TTS Enhancement

**Feature:** `--auto-transcript` Flag hinzugefÃ¼gt
- Nutzt Whisper um Audio automatisch zu transkribieren
- Commit: `caa8da3` auf Branch `nightly/02-02-2026`
- Repo: `~/projects/qwen3-tts_voice_clone`

**Status:** 5 Commits ahead of main, bereit fÃ¼r Merge

---

## ComfyUI Test

- Image Generation funktioniert
- RTX 3090, ~15s Generation Time
- Sentinel-Bild generiert und via Telegram geschickt
- Web UI unterstÃ¼tzt keine Inline-Images (Backend-Limitation)

---

## Learnings

1. **OpenClaw TTS nutzt Edge TTS (Microsoft)** â€“ kostenlos!
2. **Session Cleanup kritisch** fÃ¼r UI Performance bei langen Sessions
3. **Telegram fÃ¼r Bilder** â€“ Web UI kann keine Inline-Images
4. **OpenClaw Source:** `~/projects/openclaw-source/` geklont fÃ¼r Analyse

---

## Nachtmodus aktiviert â€“ 4 Cron Jobs

| # | Job | Start | ID |
|---|-----|-------|----|
| 1 | âœ… IntelliPlan Pendenzen (Backend) | 01:00 | `5743fef4` |
| 2 | âœ… Swiss German TTS Setup | 01:15 | `f80fb13d` |
| 3 | ðŸ”„ Brainstorm Adi-Interests | 01:30 | `5cf41b22` |
| 4 | âœ… LocAI Analyse & Improvements | 01:45 | `f4e021bd` |

### TTS Config
- Edge TTS auf `de-CH-LeniNeural` gesetzt (Swiss German)
- `[[tts:provider=edge voice=de-CH-LeniNeural]]` Override nÃ¶tig im tts Tool
- Schweizerdeutsch-Text funktioniert Ã¼berraschend gut!

### LocAI
- Neues Repo: https://github.com/McMuff86/locai.git
- Wird heute Nacht geklont, analysiert, Improvement Tasks erstellt

## Offene Tasks

- [ ] UI Bug Report an OpenClaw GitHub submitten
- [ ] Qwen3-TTS nightly â†’ main mergen
- [ ] CUDA in WSL2 funktioniert! (war falsch im alten Summary)
